(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(35),i=n.n(r),s=n(2),o=n(36),u=n.n(o),l=(n(72),n(0));var d=function(e){var t=e.setAppView,n=e.socket,a=e.setLobby,r=Object(c.useState)(""),i=Object(s.a)(r,2),o=i[0],u=i[1];return Object(c.useEffect)((function(){function e(e){a(JSON.parse(e)),JSON.parse(e).inGame?t("game"):t("lobby")}return n.on("join",e),function(){return n.off("join",e)}}),[t,n,a]),Object(l.jsxs)("div",{className:"Home",children:[Object(l.jsx)("h1",{children:"Home"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new URLSearchParams(window.location.search).keys().next().value,c={nickname:o,lobbyId:t};n.emit("join",c)},children:[Object(l.jsx)("input",{type:"text",placeholder:"Nickname",value:o,onChange:function(e){return u(e.target.value)},required:!0}),Object(l.jsx)("button",{children:"Join Lobby"})]})]})};var b=function(e){var t=e.socket,n=e.lobby,a=e.setLobby,r=e.isAdmin;function i(e){var t=JSON.parse(JSON.stringify(n));t.rounds=e,a(t)}function s(e){var t=JSON.parse(JSON.stringify(n));t.time=e,a(t)}function o(e){var t=JSON.parse(JSON.stringify(n));t.words=e,a(t)}return Object(c.useEffect)((function(){function e(e){i(e)}function n(e){s(e)}function c(e){o(e)}return t.on("roundsChanged",e),t.on("timeChanged",n),t.on("wordsChanged",c),function(){t.off("roundsChanged",e),t.off("timeChanged",n),t.off("wordsChanged",c)}}),[t,n]),Object(l.jsxs)("div",{className:"LobbyOptions",children:[Object(l.jsx)("label",{htmlFor:"rounds",children:"Rounds"}),Object(l.jsxs)("select",{className:"rounds",name:"rounds",disabled:!r(),value:n.rounds,onChange:function(e){if(r()){var n=e.target.value;i(n),t.emit("roundsChanged",n)}},children:[Object(l.jsx)("option",{value:"1",children:"1"}),Object(l.jsx)("option",{value:"2",children:"2"}),Object(l.jsx)("option",{value:"3",children:"3"}),Object(l.jsx)("option",{value:"4",children:"4"}),Object(l.jsx)("option",{value:"5",defaultValue:!0,children:"5"}),Object(l.jsx)("option",{value:"6",children:"6"}),Object(l.jsx)("option",{value:"7",children:"7"}),Object(l.jsx)("option",{value:"8",children:"8"}),Object(l.jsx)("option",{value:"9",children:"9"}),Object(l.jsx)("option",{value:"10",children:"10"})]}),Object(l.jsx)("label",{htmlFor:"time",children:"Drawing time (seconds)"}),Object(l.jsxs)("select",{className:"time",name:"time",disabled:!r(),value:n.time,onChange:function(e){if(r()){var n=e.target.value;s(n),t.emit("timeChanged",n)}},children:[Object(l.jsx)("option",{value:"10",children:"10"}),Object(l.jsx)("option",{value:"20",children:"20"}),Object(l.jsx)("option",{value:"30",children:"30"}),Object(l.jsx)("option",{value:"40",children:"40"}),Object(l.jsx)("option",{value:"50",children:"50"}),Object(l.jsx)("option",{value:"60",children:"60"}),Object(l.jsx)("option",{value:"70",children:"70"}),Object(l.jsx)("option",{value:"80",children:"80"}),Object(l.jsx)("option",{value:"90",defaultValue:!0,children:"90"}),Object(l.jsx)("option",{value:"100",children:"100"}),Object(l.jsx)("option",{value:"110",children:"110"}),Object(l.jsx)("option",{value:"120",children:"120"}),Object(l.jsx)("option",{value:"130",children:"130"}),Object(l.jsx)("option",{value:"140",children:"140"}),Object(l.jsx)("option",{value:"150",children:"150"}),Object(l.jsx)("option",{value:"160",children:"160"}),Object(l.jsx)("option",{value:"170",children:"170"}),Object(l.jsx)("option",{value:"180",children:"180"})]}),Object(l.jsx)("label",{htmlFor:"words",children:"Words"}),Object(l.jsx)("textarea",{className:"words",value:n.words.join(","),onChange:function(e){if(r()){var n=e.target.value.split(",");o(n),t.emit("wordsChanged",n)}},disabled:!r()})]})};n(74);var j=function(e){var t=e.setAppView,n=e.socket,a=e.lobby,r=e.setLobby,i=e.isAdmin;return Object(c.useEffect)((function(){return n.on("joinGame",(function(){t("game"),n.emit("ready")})),function(){return n.off("joinGame")}}),[n,t]),Object(l.jsxs)("div",{className:"Lobby",children:[Object(l.jsx)("h1",{children:"Lobby"}),Object(l.jsxs)("strong",{children:[window.location.protocol,"//",window.location.host,"/?",a.id]}),Object(l.jsxs)("div",{className:"options-players",children:[Object(l.jsx)(b,{socket:n,lobby:a,setLobby:r,isAdmin:i}),Object(l.jsxs)("div",{className:"players",children:[Object(l.jsx)("label",{htmlFor:"player-list",children:"Players"}),Object(l.jsx)("div",{className:"player-list",children:a.players.map((function(e,t){return Object(l.jsx)("p",{children:e.nickname},t)}))})]})]}),Object(l.jsx)("button",{onClick:function(){n.emit("joinGame"),t("game"),n.emit("ready")},disabled:!i(),children:"Start"})]})};var f=function(e){var t=e.lobby,n=e.index,a=Object(c.useState)(t.players[n]),r=Object(s.a)(a,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){o(t.players[n])}),[t,o]),Object(l.jsxs)("div",{className:"Player",style:{backgroundColor:i.onTurn?"#6ed1ff":i.guessed?"#6eff8b":"gray"},children:[Object(l.jsx)("p",{className:"nickname",children:i.nickname}),Object(l.jsx)("p",{className:"points",children:i.points})]})},O=n(17);n(75);var h=function(e){var t=e.socket,n=e.lobby,a=e.setLobby,r=Object(c.useState)([]),i=Object(s.a)(r,2),o=i[0],u=i[1];return Object(c.useEffect)((function(){function e(e){u([].concat(Object(O.a)(o),[e]))}function c(e){var t=JSON.parse(JSON.stringify(n)),c=t.players.findIndex((function(t){return t.id===e[0]}));t.players[c].guessed=!0,t.players[c].points+=e[1],t.players[c].pointsThisTurn=e[1],a(t),u([].concat(Object(O.a)(o),[{sender:"Player "+n.players[c].nickname,value:"guessed the word!"}]))}return t.on("messageSent",e),t.on("playerGuessed",c),function(){t.off("messageSent",e),t.off("playerGuessed",c)}}),[t,n,a,o]),Object(l.jsxs)("div",{className:"Chat",children:[Object(l.jsx)("div",{className:"messages",children:o.map((function(e,t){return Object(l.jsxs)("p",{className:"message",children:[e.sender,": ",e.value]},t)}))}),Object(l.jsx)("input",{type:"text",onKeyDown:function(e){if("Enter"===e.key){var c={sender:n.players.find((function(e){return e.id===t.id})).nickname,value:e.target.value};e.target.value="",u([].concat(Object(O.a)(o),[c])),function(e){t.emit("messageSent",e)}(c)}}})]})};n(76);var m=function(e){var t=e.socket,n=e.isOnTurn,c=e.canvasRef,a=e.contextRef,r=e.drawColor,i=e.setDrawColor,s=e.setDrawMode,o=e.setDrawWidth;return Object(l.jsxs)("div",{className:"DrawingOptions",children:[Object(l.jsx)("div",{className:"current-color",style:{backgroundColor:n()?r:"#000000"}}),Object(l.jsx)("div",{className:"colors",children:["#ffffff","#000000","#b9b9b9","#7d8180","#e0222c","#92000d","#f98a21","#f4620b","#ffd011","#f5bb00","#63ba2d","#267637","#78cdf2","#009ada","#0060b4","#022c78","#8b159f","#5b1577","#df177a","#ab1b7a","#ba5901","#763100"].map((function(e,c){return Object(l.jsx)("button",{style:{backgroundColor:e},onClick:function(){return function(e){n()&&(i(e),t.emit("colorChanged",e))}(e)},disabled:!n()},c)}))}),Object(l.jsxs)("div",{className:"drawing-modes",onChange:function(e){n()&&s(e.target.value)},children:[Object(l.jsx)("input",{type:"radio",name:"mode",value:"brush",className:"brush",defaultChecked:!0,disabled:!n()}),Object(l.jsx)("input",{type:"radio",name:"mode",value:"line",className:"line",disabled:!n()})]}),Object(l.jsx)("div",{className:"brush-size",children:[3,10,25,40].map((function(e,c){return Object(l.jsx)("button",{onClick:function(){return function(e){n()&&(o(e),t.emit("widthChanged",e))}(e)},disabled:!n()},c)}))}),Object(l.jsx)("div",{className:"clear-canvas",children:Object(l.jsx)("button",{onClick:function(){n()&&(a.current.clearRect(0,0,c.current.width,c.current.height),t.emit("clearCanvas"))},disabled:!n()})})]})};n(77);var p=function(e){var t=e.socket,n=e.lobby,a=e.setLobby,r=e.isAdmin,i=e.isOnTurn,o=Object(c.useState)(""),u=Object(s.a)(o,2),d=u[0],b=u[1],j=Object(c.useState)(" active"),O=Object(s.a)(j,2),p=O[0],v=O[1],x=Object(c.useState)(n.time),y=Object(s.a)(x,2),g=y[0],w=y[1],N=Object(c.useState)(""),C=Object(s.a)(N,2),S=C[0],k=C[1],D=Object(c.useState)(0),T=Object(s.a)(D,2),J=T[0],L=T[1],R=Object(c.useState)("#000000"),A=Object(s.a)(R,2),I=A[0],E=A[1],G=Object(c.useState)("brush"),W=Object(s.a)(G,2),P=W[0],M=W[1],U=Object(c.useState)(15),V=Object(s.a)(U,2),q=V[0],B=V[1],F=Object(c.useRef)(null),H=Object(c.useRef)(null),X=Object(c.useRef)(-1);function Y(e){var t=F.current.getBoundingClientRect(),n=getComputedStyle(F.current).borderLeftWidth,c=getComputedStyle(F.current).borderTopWidth;return{x:e.clientX-t.left-n.substring(0,n.length-2),y:e.clientY-t.top-c.substring(0,c.length-2)}}function z(e){H.current.beginPath(),H.current.moveTo(e.x,e.y)}function K(e){H.current.lineTo(e.x,e.y),H.current.stroke()}return Object(c.useEffect)((function(){t.emit("turnDataRequested",t.id),setInterval((function(){X.current>=0&&(w(X.current),X.current--)}),1e3)}),[]),Object(c.useEffect)((function(){var e=F.current.getContext("2d");function c(e){E(e)}function i(e){B(e)}function s(){e.clearRect(0,0,F.current.width,F.current.height)}function o(n){if(r()){var c=e.getImageData(0,0,800,300).data.buffer,a=e.getImageData(0,300,800,300).data.buffer,i=[new Uint8ClampedArray(c),new Uint8ClampedArray(a)],s={socketId:n,timeCounter:X.current,pictureData:i};t.emit("turnDataSent",s)}}function u(t){-1!=t.timeCounter&&w(t.timeCounter-1),X.current=t.timeCounter-1;var n=new Uint8ClampedArray(t.pictureData[0]),c=new Uint8ClampedArray(t.pictureData[1]),a=new ImageData(n,800,300),r=new ImageData(c,800,300);e.putImageData(a,0,0),e.putImageData(r,0,300)}function d(e){var c=JSON.parse(JSON.stringify(n));c.players.forEach((function(e){e.onTurn=!1,e.guessed=!1,e.pointsThisTurn=0})),c.players[e[0]].onTurn=!0,a(c),k(e[1]),e[0]==n.players.findIndex((function(e){return e.id===t.id}))?b(Object(l.jsxs)("p",{children:["YOU WILL BE DRAWING",Object(l.jsx)("br",{}),e[1]]})):b(Object(l.jsxs)("p",{children:["NEXT WILL BE DRAWING",Object(l.jsx)("br",{}),n.players[e[0]].nickname]})),X.current=-1,w(n.time),L(J+1),s()}function j(){v(""),X.current=n.time}function f(){b(n.players.map((function(e,t){return Object(l.jsxs)("p",{children:[e.nickname,": ",e.pointsThisTurn]},t)}))),v(" active")}return e.lineCap="round",e.lineJoin="round",e.strokeStyle=I,e.lineWidth=q,e.beginPath(),H.current=e,t.on("startDrawing",z),t.on("draw",K),t.on("colorChanged",c),t.on("widthChanged",i),t.on("clearCanvas",s),t.on("turnDataRequested",o),t.on("turnDataSent",u),t.on("newPlayerOnTurn",d),t.on("startTurn",j),t.on("endTurn",f),function(){t.off("startDrawing",z),t.off("draw",K),t.off("colorChanged",c),t.off("widthChanged",i),t.off("clearCanvas",s),t.off("turnDataRequested",o),t.off("turnDataSent",u),t.off("newPlayerOnTurn",d),t.off("startTurn",j),t.off("endTurn",f)}}),[t,n,a,r,g,w,I,P,q]),Object(l.jsxs)("div",{className:"Game",children:[Object(l.jsx)("h1",{children:"Game"}),Object(l.jsxs)("div",{className:"info",children:[Object(l.jsx)("div",{className:"time",children:Object(l.jsxs)("p",{children:["Time: ",g]})}),Object(l.jsx)("div",{className:"word",children:Object(l.jsx)("p",{children:S})}),Object(l.jsx)("div",{className:"rounds",children:Object(l.jsxs)("p",{children:["Round: ",J,"/",n.rounds]})})]}),Object(l.jsxs)("div",{className:"players-game-chat",children:[Object(l.jsx)("div",{className:"player-list",children:n.players.map((function(e,t){return Object(l.jsx)(f,{lobby:n,index:t},t)}))}),Object(l.jsxs)("div",{className:"canvas",children:[Object(l.jsx)("div",{className:"overlay"+p,children:d}),Object(l.jsx)("canvas",{width:"800",height:"600",ref:F,onMouseDown:function(e){if(1===e.buttons&&i()){var n=Y(e);"brush"===P?(z(n),K(n),t.emit("startDrawing",n),t.emit("draw",n)):"line"===P&&(z(n),t.emit("startDrawing",n))}},onMouseUp:function(e){if(0===e.button&&i()){var n=Y(e);"line"===P&&(K(n),t.emit("draw",n))}},onMouseMove:function(e){if(1===e.buttons&&i()){var n=Y(e);"brush"===P&&(K(n),t.emit("draw",n))}}})]}),Object(l.jsx)(h,{socket:t,lobby:n,setLobby:a})]}),Object(l.jsx)(m,{socket:t,isOnTurn:i,canvasRef:F,contextRef:H,drawColor:I,setDrawColor:E,setDrawMode:M,setDrawWidth:B})]})};n(78);var v=function(){var e=Object(c.useState)("home"),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),i=Object(s.a)(r,2),o=i[0],b=i[1],f=Object(c.useState)(),O=Object(s.a)(f,2),h=O[0],m=O[1];function v(){return o.id===h.players[0].id}return Object(c.useEffect)((function(){var e=u()();return b(e),function(){e.close()}}),[b]),Object(c.useEffect)((function(){function e(e){var t=JSON.parse(JSON.stringify(h));t.players.push(e),m(t)}function t(e){var t=JSON.parse(JSON.stringify(h)),n=t.players.findIndex((function(t){return t.id===e}));t.players.splice(n,1),m(t)}return o&&(o.on("playerJoined",e),o.on("playerDisconnected",t)),function(){o&&(o.off("playerJoined",e),o.off("playerDisconnected",t))}}),[o,h,m]),Object(l.jsxs)("div",{className:"App",children:["home"===n&&o&&Object(l.jsx)(d,{setAppView:a,socket:o,setLobby:m}),"lobby"===n&&h&&Object(l.jsx)(j,{setAppView:a,socket:o,lobby:h,setLobby:m,isAdmin:v}),"game"===n&&Object(l.jsx)(p,{socket:o,lobby:h,setLobby:m,isAdmin:v,isOnTurn:function(){return h.players.find((function(e){return o.id===e.id})).onTurn}})]})};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(v,{})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.1636a09d.chunk.js.map