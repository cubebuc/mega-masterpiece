(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(35),a=n.n(i),s=n(2),o=n(36),u=n.n(o),l=(n(72),n(0));var d=function(e){var t=e.setAppView,n=e.socket,r=e.setLobby,i=Object(c.useState)(""),a=Object(s.a)(i,2),o=a[0],u=a[1];return Object(c.useEffect)((function(){function e(e){r(e),e.inGame?t("game"):t("lobby")}return n.on("join",e),function(){return n.off("join",e)}}),[t,n,r]),Object(l.jsxs)("div",{className:"Home",children:[Object(l.jsx)("h1",{children:"Home"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new URLSearchParams(window.location.search).keys().next().value,c={nickname:o,lobbyId:t};n.emit("join",c)},children:[Object(l.jsx)("input",{type:"text",placeholder:"Nickname",value:o,onChange:function(e){return u(e.target.value)},required:!0}),Object(l.jsx)("button",{children:"Join Lobby"})]})]})};var b=function(e){var t=e.socket,n=e.lobby,r=e.setLobby,i=e.isAdmin;function a(e){var t=JSON.parse(JSON.stringify(n));t.rounds=e,r(t)}function s(e){var t=JSON.parse(JSON.stringify(n));t.time=e,r(t)}function o(e){var t=JSON.parse(JSON.stringify(n));t.words=e,r(t)}return Object(c.useEffect)((function(){function e(e){a(e)}function n(e){s(e)}function c(e){o(e)}return t.on("roundsChanged",e),t.on("timeChanged",n),t.on("wordsChanged",c),function(){t.off("roundsChanged",e),t.off("timeChanged",n),t.off("wordsChanged",c)}}),[t,n]),Object(l.jsxs)("div",{className:"LobbyOptions",children:[Object(l.jsx)("label",{htmlFor:"rounds",children:"Rounds"}),Object(l.jsxs)("select",{className:"rounds",name:"rounds",disabled:!i(),value:n.rounds,onChange:function(e){if(i()){var n=e.target.value;a(n),t.emit("roundsChanged",n)}},children:[Object(l.jsx)("option",{value:"1",children:"1"}),Object(l.jsx)("option",{value:"2",children:"2"}),Object(l.jsx)("option",{value:"3",children:"3"}),Object(l.jsx)("option",{value:"4",children:"4"}),Object(l.jsx)("option",{value:"5",defaultValue:!0,children:"5"}),Object(l.jsx)("option",{value:"6",children:"6"}),Object(l.jsx)("option",{value:"7",children:"7"}),Object(l.jsx)("option",{value:"8",children:"8"}),Object(l.jsx)("option",{value:"9",children:"9"}),Object(l.jsx)("option",{value:"10",children:"10"})]}),Object(l.jsx)("label",{htmlFor:"time",children:"Drawing time (seconds)"}),Object(l.jsxs)("select",{className:"time",name:"time",disabled:!i(),value:n.time,onChange:function(e){if(i()){var n=e.target.value;s(n),t.emit("timeChanged",n)}},children:[Object(l.jsx)("option",{value:"10",children:"10"}),Object(l.jsx)("option",{value:"20",children:"20"}),Object(l.jsx)("option",{value:"30",children:"30"}),Object(l.jsx)("option",{value:"40",children:"40"}),Object(l.jsx)("option",{value:"50",children:"50"}),Object(l.jsx)("option",{value:"60",children:"60"}),Object(l.jsx)("option",{value:"70",children:"70"}),Object(l.jsx)("option",{value:"80",children:"80"}),Object(l.jsx)("option",{value:"90",defaultValue:!0,children:"90"}),Object(l.jsx)("option",{value:"100",children:"100"}),Object(l.jsx)("option",{value:"110",children:"110"}),Object(l.jsx)("option",{value:"120",children:"120"}),Object(l.jsx)("option",{value:"130",children:"130"}),Object(l.jsx)("option",{value:"140",children:"140"}),Object(l.jsx)("option",{value:"150",children:"150"}),Object(l.jsx)("option",{value:"160",children:"160"}),Object(l.jsx)("option",{value:"170",children:"170"}),Object(l.jsx)("option",{value:"180",children:"180"})]}),Object(l.jsx)("label",{htmlFor:"words",children:"Words"}),Object(l.jsx)("textarea",{className:"words",value:n.words.join(","),onChange:function(e){if(i()){var n=e.target.value.split(",");o(n),t.emit("wordsChanged",n)}},disabled:!i()})]})};var j=function(e){var t=e.nickname;return Object(l.jsx)("div",{children:Object(l.jsx)("p",{children:t})})};var f=function(e){var t=e.socket,n=e.lobby,r=e.setLobby;return Object(c.useEffect)((function(){function e(e){var t=JSON.parse(JSON.stringify(n));t.players.push(e),r(t)}return t.on("playerJoined",e),function(){t.off("playerJoined",e)}}),[t,n,r]),Object(l.jsx)("div",{className:"PlayerList",children:n.players.map((function(e,t){return Object(l.jsx)(j,{nickname:e.nickname},t)}))})};n(74);var O=function(e){var t=e.setAppView,n=e.socket,r=e.lobby,i=e.setLobby,a=e.isAdmin;return Object(c.useEffect)((function(){return n.on("joinGame",(function(){t("game"),n.emit("ready")})),function(){return n.off("joinGame")}}),[n,t]),Object(l.jsxs)("div",{className:"Lobby",children:[Object(l.jsx)("h1",{children:"Lobby"}),Object(l.jsxs)("strong",{children:[window.location.protocol,"//",window.location.host,"/?",r.id]}),Object(l.jsxs)("div",{className:"options-players",children:[Object(l.jsx)(b,{socket:n,lobby:r,setLobby:i,isAdmin:a}),Object(l.jsxs)("div",{className:"players",children:[Object(l.jsx)("label",{htmlFor:"player-list",children:"Players"}),Object(l.jsx)(f,{id:"player-list",socket:n,lobby:r,setLobby:i})]})]}),Object(l.jsx)("button",{onClick:function(){n.emit("joinGame"),t("game"),n.emit("ready")},disabled:!a(),children:"Start"})]})},h=n(17);n(75);var m=function(e){var t=e.socket,n=e.lobby,r=e.setLobby,i=Object(c.useState)([]),a=Object(s.a)(i,2),o=a[0],u=a[1];return Object(c.useEffect)((function(){function e(e){console.log(e),u([].concat(Object(h.a)(o),[e]))}return t.on("messageSent",e),t.on("playerGuessed",(function(e){var t=JSON.parse(JSON.stringify(n)),c=t.players.findIndex((function(t){return t.id===e}));t.players[c].guessed=!0,r(t),u([].concat(Object(h.a)(o),[{sender:"Player "+n.players[c].nickname,value:"guessed the word!"}]))})),function(){t.off("messageSent",e)}}),[t,n,o]),Object(l.jsxs)("div",{className:"Chat",children:[Object(l.jsx)("div",{className:"messages",children:o.map((function(e,t){return Object(l.jsxs)("p",{className:"message",children:[e.sender,": ",e.value]},t)}))}),Object(l.jsx)("input",{type:"text",onKeyDown:function(e){if("Enter"===e.key){var c={sender:n.players.find((function(e){return e.id===t.id})).nickname,value:e.target.value};e.target.value="",u([].concat(Object(h.a)(o),[c])),function(e){console.log(e),t.emit("messageSent",e)}(c)}}})]})};n(76);var p=function(e){var t=e.socket,n=e.isOnTurn,c=e.canvasRef,r=e.contextRef,i=e.drawColor,a=e.setDrawColor,s=e.setDrawMode,o=e.setDrawWidth;return Object(l.jsxs)("div",{className:"DrawingOptions",children:[Object(l.jsx)("div",{className:"current-color",style:{backgroundColor:n()?i:"#000000"}}),Object(l.jsx)("div",{className:"colors",children:["#ffffff","#000000","#b9b9b9","#7d8180","#e0222c","#92000d","#f98a21","#f4620b","#ffd011","#f5bb00","#63ba2d","#267637","#78cdf2","#009ada","#0060b4","#022c78","#8b159f","#5b1577","#df177a","#ab1b7a","#ba5901","#763100"].map((function(e,c){return Object(l.jsx)("button",{style:{backgroundColor:e},onClick:function(){return function(e){n()&&(a(e),t.emit("colorChanged",e))}(e)},disabled:!n()},c)}))}),Object(l.jsxs)("div",{className:"drawing-modes",onChange:function(e){n()&&s(e.target.value)},children:[Object(l.jsx)("input",{type:"radio",name:"mode",value:"brush",className:"brush",defaultChecked:!0,disabled:!n()}),Object(l.jsx)("input",{type:"radio",name:"mode",value:"line",className:"line",disabled:!n()})]}),Object(l.jsx)("div",{className:"brush-size",children:[3,10,25,40].map((function(e,c){return Object(l.jsx)("button",{onClick:function(){return function(e){n()&&(o(e),t.emit("widthChanged",e))}(e)},disabled:!n()},c)}))}),Object(l.jsx)("div",{className:"clear-canvas",children:Object(l.jsx)("button",{onClick:function(){n()&&(r.current.clearRect(0,0,c.current.width,c.current.height),t.emit("clearCanvas"))},disabled:!n()})})]})};n(77);var v=function(e){var t=e.socket,n=e.lobby,r=e.setLobby,i=e.isAdmin,a=e.isOnTurn,o=Object(c.useState)(""),u=Object(s.a)(o,2),d=u[0],b=u[1],j=Object(c.useState)(""),O=Object(s.a)(j,2),h=O[0],v=O[1],x=Object(c.useState)(n.time),y=Object(s.a)(x,2),g=y[0],w=y[1],N=Object(c.useState)(""),C=Object(s.a)(N,2),S=C[0],k=C[1],D=Object(c.useState)(0),L=Object(s.a)(D,2),J=L[0],R=L[1],T=Object(c.useState)("#000000"),A=Object(s.a)(T,2),E=A[0],I=A[1],W=Object(c.useState)("brush"),P=Object(s.a)(W,2),G=P[0],M=P[1],U=Object(c.useState)(15),V=Object(s.a)(U,2),q=V[0],B=V[1],F=Object(c.useRef)(null),H=Object(c.useRef)(null),X=Object(c.useRef)(-1);function Y(e){var t=F.current.getBoundingClientRect(),n=getComputedStyle(F.current).borderLeftWidth,c=getComputedStyle(F.current).borderTopWidth;return{x:e.clientX-t.left-n.substring(0,n.length-2),y:e.clientY-t.top-c.substring(0,c.length-2)}}function z(e){H.current.beginPath(),H.current.moveTo(e.x,e.y)}function K(e){H.current.lineTo(e.x,e.y),H.current.stroke()}return Object(c.useEffect)((function(){setInterval((function(){X.current>=0&&(w(X.current),X.current--)}),1e3)}),[]),Object(c.useEffect)((function(){var e=F.current.getContext("2d");function c(e){I(e)}function r(e){B(e)}function a(){e.clearRect(0,0,F.current.width,F.current.height)}function s(n){if(i()){var c=e.getImageData(0,0,800,300).data.buffer,r=e.getImageData(0,300,800,300).data.buffer,a={socketId:n,pictureData:[new Uint8ClampedArray(c),new Uint8ClampedArray(r)]};t.emit("pictureDataSent",a)}}function o(t){var n=new Uint8ClampedArray(t[0]),c=new Uint8ClampedArray(t[1]),r=new ImageData(n,800,300),i=new ImageData(c,800,300);e.putImageData(r,0,0),e.putImageData(i,0,300)}function u(e){j(),n.players.find((function(e){return e.id===t.id})).onTurn=!0,n.currentWord=e,k(e),b(Object(l.jsxs)("p",{children:["YOU WILL BE DRAWING",Object(l.jsx)("br",{}),e]}))}function d(e){j(),n.players[e[0]].onTurn=!0,k(e[1]),b(Object(l.jsxs)("p",{children:["NEXT WILL BE DRAWING",Object(l.jsx)("br",{}),n.players[e[0]].nickname]}))}function j(){n.players.forEach((function(e){return e.onTurn=!1})),n.players.forEach((function(e){return e.guessed=!1})),X.current=-1,w(n.time),R(J+1),v(" active"),a(),setTimeout((function(){v(""),X.current=n.time}),2e3)}return e.lineCap="round",e.lineJoin="round",e.strokeStyle=E,e.lineWidth=q,e.beginPath(),H.current=e,t.emit("pictureDataRequested",t.id),t.on("startDrawing",z),t.on("draw",K),t.on("colorChanged",c),t.on("widthChanged",r),t.on("clearCanvas",a),t.on("pictureDataRequested",s),t.on("pictureDataSent",o),t.on("thisPlayerOnTurn",u),t.on("otherPlayerOnTurn",d),function(){t.off("startDrawing",z),t.off("draw",K),t.off("colorChanged",c),t.off("widthChanged",r),t.off("clearCanvas",a),t.off("pictureDataRequested",s),t.off("pictureDataSent",o),t.off("thisPlayerOnTurn",u),t.off("otherPlayerOnTurn",d)}}),[t,n,i,g,w,E,G,q]),Object(l.jsxs)("div",{className:"Game",children:[Object(l.jsx)("h1",{children:"Game"}),Object(l.jsxs)("div",{className:"info",children:[Object(l.jsx)("div",{className:"time",children:Object(l.jsxs)("p",{children:["Time: ",g]})}),Object(l.jsx)("div",{className:"word",children:Object(l.jsx)("p",{children:S})}),Object(l.jsx)("div",{className:"rounds",children:Object(l.jsxs)("p",{children:["Round: ",J,"/",n.rounds]})})]}),Object(l.jsxs)("div",{className:"players-game-chat",children:[Object(l.jsx)(f,{socket:t,lobby:n,setLobby:r}),Object(l.jsxs)("div",{className:"canvas",children:[Object(l.jsx)("div",{className:"overlay"+h,children:d}),Object(l.jsx)("canvas",{width:"800",height:"600",ref:F,onMouseDown:function(e){if(1===e.buttons&&a()){var n=Y(e);"brush"===G?(z(n),K(n),t.emit("startDrawing",n),t.emit("draw",n)):"line"===G&&(z(n),t.emit("startDrawing",n))}},onMouseUp:function(e){if(0===e.button&&a()){var n=Y(e);"line"===G&&(K(n),t.emit("draw",n))}},onMouseMove:function(e){if(1===e.buttons&&a()){var n=Y(e);"brush"===G&&(K(n),t.emit("draw",n))}}})]}),Object(l.jsx)(m,{socket:t,lobby:n,setLobby:r})]}),Object(l.jsx)(p,{socket:t,isOnTurn:a,canvasRef:F,contextRef:H,drawColor:E,setDrawColor:I,setDrawMode:M,setDrawWidth:B})]})};n(78);var x=function(){var e=Object(c.useState)("home"),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),a=Object(s.a)(i,2),o=a[0],b=a[1],j=Object(c.useState)(),f=Object(s.a)(j,2),h=f[0],m=f[1];function p(){return o.id===h.players[0].id}return Object(c.useEffect)((function(){var e=u()();return b(e),function(){e.close()}}),[b]),Object(c.useEffect)((function(){function e(e){var t=JSON.parse(JSON.stringify(h)),n=t.players.findIndex((function(t){return t.id===e}));t.players.splice(n,1),m(t)}return o&&o.on("playerDisconnecting",e),function(){o&&o.off("playerDisconnecting",e)}}),[o,h]),Object(l.jsxs)("div",{className:"App",children:["home"===n&&o&&Object(l.jsx)(d,{setAppView:r,socket:o,setLobby:m}),"lobby"===n&&h&&Object(l.jsx)(O,{setAppView:r,socket:o,lobby:h,setLobby:m,isAdmin:p}),"game"===n&&Object(l.jsx)(v,{socket:o,lobby:h,setLobby:m,isAdmin:p,isOnTurn:function(){return h.players.find((function(e){return o.id===e.id})).onTurn}})]})};a.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.fe645d40.chunk.js.map